# BookStack Environment Configuration
# =============================================================================
# INSTRUCTIONS:
# 1. Copy this file: cp .env.example .env
# 2. Generate APP_KEY (see below)
# 3. Fill in strong, random passwords
# 4. Set permissions: chmod 600 .env
# 5. NEVER commit .env to git
# =============================================================================

# =============================================================================
# Application Settings
# =============================================================================

# APP_KEY: Session encryption key (REQUIRED)
# Generate with one of these methods:
#
# Method 1 - Using OpenSSL (recommended):
#   echo "base64:$(openssl rand -base64 32)"
#
# Method 2 - Using Docker:
#   docker run --rm -it linuxserver/bookstack:v25.12.1-ls240 php /app/www/artisan key:generate --show
#
# The key MUST start with "base64:" followed by 44 characters
APP_KEY=changeme_generate_app_key_here

# Application URL (used for links in emails, etc.)
# Change if accessing via different hostname or port
APP_URL=http://localhost:11200

# Timezone (IANA format)
# List: https://en.wikipedia.org/wiki/List_of_tz_database_time_zones
TZ=America/New_York

# =============================================================================
# Database Configuration
# =============================================================================

# Database name
DB_NAME=bookstack

# Database user (not root - for application access)
DB_USER=bookstack_user

# Database password for the application user
# Generate with: openssl rand -base64 24
DB_PASSWORD=changeme_strong_password_here

# Root password for MariaDB (for administration only)
# Generate with: openssl rand -base64 24
DB_ROOT_PASSWORD=changeme_root_password_here

# =============================================================================
# Email Configuration (Optional)
# =============================================================================
# BookStack can send emails for:
# - Password resets
# - User invitations
# - Comment notifications
# - Page change notifications
#
# Default: "log" (emails logged to file, not sent)
# Options: smtp, sendmail, log

# Mail driver (smtp, sendmail, or log)
# MAIL_DRIVER=smtp

# SMTP server settings
# MAIL_HOST=smtp.example.com
# MAIL_PORT=587
# MAIL_ENCRYPTION=tls
# MAIL_USERNAME=your_smtp_user
# MAIL_PASSWORD=your_smtp_password

# Sender information
# MAIL_FROM=bookstack@example.com
# MAIL_FROM_NAME=BookStack

# =============================================================================
# Optional: Authentication (SSO) - DO NOT CONFIGURE YET
# =============================================================================
# BookStack supports multiple SSO methods:
# - SAML2: Enterprise SSO (Azure AD, Okta, etc.)
# - LDAP: Active Directory integration
# - OIDC: OpenID Connect providers
#
# See: https://www.bookstackapp.com/docs/admin/authentication/
#
# Example SAML2 configuration (uncomment when ready):
# AUTH_METHOD=saml2
# SAML2_NAME=SSO Provider
# SAML2_EMAIL_ATTRIBUTE=email
# SAML2_EXTERNAL_ID_ATTRIBUTE=uid
# SAML2_IDP_ENTITYID=https://idp.example.com
# SAML2_AUTOLOAD_METADATA=true

# =============================================================================
# Notes
# =============================================================================
# Default admin credentials (CHANGE IMMEDIATELY after first login):
#   Email: admin@admin.com
#   Password: password
#
# Security recommendations:
# - Set file permissions: chmod 600 .env
# - Rotate passwords every 90 days
# - Keep a secure backup of this file (encrypted)
# - Never share APP_KEY or database passwords
# - Validate before deploy: ./setup/validate-env.sh
#
# =============================================================================
# Credential Tiers (future upgrade path)
# =============================================================================
# Tier 1 (current): .env files with chmod 600
# Tier 2: Docker secrets (mounted at /run/secrets/)
# Tier 3: External secret manager (HashiCorp Vault, Doppler, 1Password)
#
# To upgrade to Docker secrets, add to compose.yml:
#   secrets:
#     db_password:
#       file: ./secrets/db_password.txt
#   services:
#     bookstack:
#       secrets:
#         - db_password
